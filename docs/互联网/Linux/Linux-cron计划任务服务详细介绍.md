<!-- TOC -->

- [1、linux任务调度的工作主要分为两类](#1linux任务调度的工作主要分为两类)
- [2.crontab命令选项](#2crontab命令选项)
- [3.cron文件语法](#3cron文件语法)
- [4.记住几个特殊符号的含义](#4记住几个特殊符号的含义)
- [5、cron范例](#5cron范例)
- [6、新增调度任务](#6新增调度任务)
- [7、查看调度任务](#7查看调度任务)
- [8、删除任务调度工作](#8删除任务调度工作)
- [9、任务调度执行结果的转向](#9任务调度执行结果的转向)
- [10、原理](#10原理)

<!-- /TOC -->

> cron是一个linux下的定时执行工具，可以在无需人工干预的情况下运行作业。由于Cron 是Linux的内置服务，但它不自动起来，可以用以下的方法启动、关闭这个服务:

    service crond start //启动服务
    service crond stop //关闭服务
    service crond restart //重启服务
    service crond reload //重新载入配置
   

### 1、linux任务调度的工作主要分为两类

- 系统执行的工作

    系统周期性所要执行的工作，如备份系统数据、清理缓存

- 个人执行的工作

    某个用户定期要做的工作，例如每隔10分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置。

### 2.crontab命令选项

    -u指定一个用户,
    -l列出某个用户的任务计划,
    -r删除某个用户的任务,
    -e编辑某个用户的任务

### 3.cron文件语法

    分    小时   日      月      星期     命令
    0-59  0-23  1-31  1-12    0-6    command    (取值范围,0表示周日一般一行对应一个任务)

### 4.记住几个特殊符号的含义

    "*"代表取值范围内的数字,
    "/"代表"每",
    "-"代表从某个数字到某个数字,
    ","分开几个离散的数字


### 5、cron范例
    Minute Hour Day Month Dayofweek   command
    分钟    小时  天    月       天每星期       命令
    每个字段代表的含义如下：
    Minute            每个小时的第几分钟执行该任务
    Hour               每天的第几个小时执行该任务
    Day                每月的第几天执行该任务
    Month             每年的第几个月执行该任务
    DayOfWeek    每周的第几天执行该任务
    Command       指定要执行的程序
     
在这些字段里，除了“Command”是每次都必须指定的字段以外，其它字段皆为可选字段，可视需要决定。

对于不指定的字段，要用“*”来填补其位置。

范例如下：

    5      *       *          *     *    ls        
    指定每小时的第5分钟执行一次ls命令

    30    5      *          *     *    ls             
    指定每天的 5:30 执行ls命令

    30    7      8         *     *     ls             
    指定每月8号的7：30分执行ls命令

    30    5      8         6    *     ls             
    指定每年的6月8日5：30执行ls命令

    30    6      *          *    0     ls             
    指定每星期日的6:30执行ls命令[注：0表示星期天，1表示星期1，以此类推，也可以用英文来表示，sun表示星期天，mon表示星期一等。]

    30    3     10,20    *    *     ls    
    每月10号及20号的3：30执行ls命令[注：“，”用来连接多个不连续的时段]

    25    8-11 *           *    *     ls      
    每天8-11点的第25分钟执行ls命令[注：“-”用来连接连续的时段]

    */15  *       *           *    *     ls         
    每15分钟执行一次ls命令 [即每个小时的第0 15 30 45 60分钟执行ls命令 ]

    30   6     */10        *     *     ls      
    每个月中，每隔10天6:30执行一次ls命令[即每月的1、11、21、31日是的6：30执行一次ls命令。 ]
    
    50   7      *            *     *    root     run-parts     /etc/cron.daily  
    [ 注：run-parts参数表示，执行后面目录中的所有可执行文件。 ]

    每天7：50以root 身份执行/etc/cron.daily目录中的所有可执行文件
    

### 6、新增调度任务

新增调度任务可用两种方法

- 1、在命令行输入: crontab -e 然后添加相应的任务，wq存盘退出。

- 2、直接编辑/etc/crontab 文件，即vi /etc/crontab，添加相应的任务。


### 7、查看调度任务

    crontab -l //列出当前的所有调度任务
    crontab -l -u jp   //列出用户jp的所有调度任务

### 8、删除任务调度工作

    crontab -r  //删除所有任务调度工作

### 9、任务调度执行结果的转向

例1：每天5：30执行ls命令，并把结果输出到/jp/test文件中

    30 5 * * * ls >/jp/test 2>&1

 注：2>&1 表示执行结果及错误信息。

### 10、原理

cron服务每分钟不仅要读一次/var/spool/cron内的所有文件，还需要读一次/etc/crontab,因此我们配置这个文件也能运用cron服务做一些事情。用crontab -e配置是针对某个用户的，而编辑/etc/crontab是针对系统的任务。

-----
@tsingchan